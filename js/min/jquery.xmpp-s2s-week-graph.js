jQuery(document).ready(function(e){function a(){if(e("#xmpp_s2s_week_graph_choices").is(":empty")){var a=e("#xmpp_s2s_week_graph_choices");a.empty(),e.each(p,function(e,i){a.append('<div><input type="checkbox" name="'+e+'" checked="checked" id="xmpp_s2s_week_graph_choices_'+e+'"></input><label for="xmpp_s2s_week_graph_choices_'+e+'" style="color:'+i.color+';">'+i.label+"</label></div>")}),a.find("input").click(i)}}function i(){var a=[];e("#xmpp_s2s_week_graph_choices").find("input:checked").each(function(){var i=e(this).attr("name");i&&p[i]&&a.push(p[i])}),a.length>0&&e.plot("#xmpp_s2s_week_graph",a,s)}function o(){e.ajax({method:"GET",url:xmpp_s2s_week_graph.data_url,dataType:"json",timeout:3e4,success:function(e){p=e,a(),i()}})}function t(){e.ajax({method:"GET",url:xmpp_s2s_week_graph.cache_data_url,dataType:"json",timeout:3e4,success:function(e){e&&(p=e,a(),i())},complete:function(){o(),setInterval(function(){o()},3e5)}})}var p=[],s={xaxis:{mode:"time",timezone:"browser",tickSize:[1,"day"],timeformat:"%a</br>%e.%m",dayNames:xmpp_s2s_week_graph.day_names},yaxis:{tickDecimals:0},series:{lines:{lineWidth:1},shadowSize:0},grid:{clickable:!0,hoverable:!0,color:xmpp_s2s_week_graph.grind_color,borderWidth:1},legend:{show:!1}};e("#xmpp_s2s_week_graph").bind("plothover",function(a,i,o){var t=null;if(o){if(t!=o.dataIndex){t=o.dataIndex,e("#flot-tooltip").remove();var p=o.datapoint[0],s=o.datapoint[1],n=new Date(p);n=n.toLocaleTimeString(),showToolTip(e("#xmpp_s2s_week_graph"),o.pageX,o.pageY,s+" "+o.series.caption+xmpp_s2s_week_graph.caption+n)}}else e("#flot-tooltip").remove(),t=null}),t(),e(window).on("resize",function(){i()})});